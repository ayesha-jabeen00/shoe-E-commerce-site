<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Product Detail</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <link rel="stylesheet" href="styles.css">
  <script src="script.js"></script>
</head>
<body>

<!-- Navbar -->
<header class="navbar">
    <div class="logo">SneakWear</div>

   <nav class="nav-links" id="navLinks">
  <a href="index.html">Home</a>
  <a href="Shop.html">Shop</a>
  <a href="#blogSection">Blog</a>
  <div class="dropdown">
    <a href="#" class="dropdown-toggle" onclick="toggleDropdown()">Pages <i id="caret" class="fas fa-caret-up"></i></a>
<div id="dropdownMenu" class="dropdown-menu">
  <a href="#testimonial">Testimonial</a>
  <a href="#newsletter">Newsletter</a>
</div>
  </div>
  <a href="#contactSection">Contact</a>
</nav>


   <!-- MAIN PAGE ICONS -->
<div class="icons">
  <i class="fas fa-search" onclick="toggleSearch()"></i>
  <i class="fas fa-user" onclick="goToAccount()"></i>

  <!-- Favorite icon -->
  <a href="favorite.html" class="fav-link" style="position: relative;">
    <i class="fas fa-heart"></i>
    <span class="fav-count" id="favCount" style="display: none;" >0</span>
  </a>

  <!-- Cart icon -->
  <a href="cart.html" class="cart-link" style="position: relative;">
    <i class="fas fa-shopping-bag" id="cart-icon"></i>
    <span class="cart-count" id="cart-count" style="display: none;">0</span>
  </a>
</div>


    <!-- Search bar -->
    <div class="search-container" id="searchBox">
      <input type="text" placeholder="Search products..." />
    </div>

    <div class="hamburger" onclick="toggleMenu()">
      <i class="fas fa-bars"></i>
    </div>
</header>


<!-- Product Detail Section -->
<section class="product-detail-section">
  <div class="product-gallery">
    <img src="" alt="Product" class="product-main-img" id="mainImage">
    <div class="product-thumbnails">
      <img id="thumb1" onclick="changeImage(this.src)">
      <img id="thumb2" onclick="changeImage(this.src)">
    </div>
  </div>

  <div class="product-info-panel">
    <h2 class="product-title" id="productTitle">Loading...</h2>
    <div class="product-price" id="productPrice"></div>

    <div class="product-size-select">
      <label for="size">Size:</label>
      <select id="size">
        <option>6</option>
        <option>7</option>
        <option>8</option>
        <option>9</option>
        <option>10</option>
      </select>
    </div>

    <div class="product-qty-select">
      <label>Quantity:</label>
      <button onclick="changeQty(-1)">-</button>
      <input type="text" id="qty" value="1" readonly>
      <button onclick="changeQty(1)">+</button>
    </div>

    <div class="product-buttons">
      <button class="btn-add-cart" onclick="addToCart(event, selectedProduct)">Add to Cart</button>
      <button class="btn-buy-now">Buy Now</button>
    </div>

    <div class="product-description">
      <h4 class="desc-heading">Product Description</h4>
      <p class="desc-text" id="productDesc"></p>
    </div>
  </div>
</section>
  
<!-- Related Products Section -->
<section class="related-products-section">
  <h3 class="related-title">Similar Products</h3>
  <div class="products-container">
    <!-- card 1 -->
 <a class="product-card">
  <div class="product-image" onclick="viewProduct({
    id: 'reebok1',
    title: 'Reebok Running Shoes',
    price: 2599,
    image: 'https://img.freepik.com/free-photo/new-sneakers_93675-130032.jpg',
    imageBack: 'https://img.freepik.com/premium-photo/black-white-sneakers-isolated-black-background_1169993-26.jpg',
    brand: 'Reebok',
    description: 'These premium black and white sneakers offer unmatched comfort and style for everyday use or workouts.'
  })">
    <img src="https://img.freepik.com/free-photo/new-sneakers_93675-130032.jpg" alt="Shoe Front" class="img-front">
    <img src="https://img.freepik.com/premium-photo/black-white-sneakers-isolated-black-background_1169993-26.jpg" alt="Shoe Back" class="img-back">

    <div class="icon">
      <i class="fas fa-heart" onclick="event.stopPropagation(); toggleFavorite(this, {
        id: 'reebok1',
        title: 'Reebok Running Shoes',
        price: 2599,
        image: 'https://img.freepik.com/free-photo/new-sneakers_93675-130032.jpg'
      })"></i>

      <i class="fas fa-shopping-cart" onclick="event.stopPropagation(); addToCart(event, {
        id: 'reebok1',
        title: 'Reebok Running Shoes',
        price: 2599,
        image: 'https://img.freepik.com/free-photo/new-sneakers_93675-130032.jpg'
      })"></i>
    </div>

    <div class="discount-badge">-9%</div>
  </div>

  <div class="product-info">
    <h4>Reebok</h4>
    <p>Reebok Running Shoes</p>
    <div class="stars">★★★★★</div>
    <div class="price">
  <span class="old">₹3,599</span>
  ₹2,599
  </div>
  </div>
</a>

    <!-- card 2 -->
 <a class="product-card">
  <div class="product-image" onclick="viewProduct({
    id: 'Adidas2',
    title: 'Adidas Sport Shoes',
    price: 1599,
    image: 'https://res.cloudinary.com/dxtmzketd/image/upload/v1750482771/shoes_ailcrl.jpg',
    imageBack: 'https://res.cloudinary.com/dxtmzketd/image/upload/v1750482799/shoes_1_fdk1xc.jpg',
    brand: 'Adidas',
    description: 'Step into comfort and performance with these Adidas sport shoes designed for all-day wear.'
  })">
    <img src="https://res.cloudinary.com/dxtmzketd/image/upload/v1750482771/shoes_ailcrl.jpg" alt="Shoe Front" class="img-front">
    <img src="https://res.cloudinary.com/dxtmzketd/image/upload/v1750482799/shoes_1_fdk1xc.jpg" alt="Shoe Back" class="img-back">

    <div class="icon">
      <i class="fas fa-heart" onclick="event.stopPropagation(); toggleFavorite(this, {
        id: 'Adidas2',
        title: 'Adidas Sport Shoes',
        price: 1599,
        image: 'https://res.cloudinary.com/dxtmzketd/image/upload/v1750482771/shoes_ailcrl.jpg'
      })"></i>

      <i class="fas fa-shopping-cart" onclick="event.stopPropagation(); addToCart(event, {
        id: 'Adidas2',
        title: 'Adidas Sport Shoes',
        price: 1599,
        image: 'https://res.cloudinary.com/dxtmzketd/image/upload/v1750482771/shoes_ailcrl.jpg'
      })"></i>
    </div>

    <div class="discount-badge">-9%</div>
  </div>

  <div class="product-info">
    <h4>Adidas</h4>
    <p>Adidas Sport Shoes</p>
    <div class="stars">★★★★★</div>
    <div class="price">
  <span class="old">₹2,599</span>
  ₹1,599
  </div>
  </div>
</a>

    <!-- card 3 -->
 <a class="product-card">
  <div class="product-image" onclick="viewProduct({
    id: 'Nike2',
    title: 'Nike Sport Shoes',
    price: 1799,
    image: 'https://res.cloudinary.com/dxtmzketd/image/upload/v1750484045/shoess_1.3_lbnxf6.jpg',
    imageBack: 'https://res.cloudinary.com/dxtmzketd/image/upload/v1750484070/shoes_2.3_tdf48e.webp',
    brand: 'Nike',
    description: 'Step into comfort and performance with these Reebok sport shoes designed for all-day wear.'
  })">
    <img src="https://res.cloudinary.com/dxtmzketd/image/upload/v1750484045/shoess_1.3_lbnxf6.jpg" alt="Shoe Front" class="img-front">
    <img src="https://res.cloudinary.com/dxtmzketd/image/upload/v1750484070/shoes_2.3_tdf48e.webp" alt="Shoe Back" class="img-back">

    <div class="icon">
      <i class="fas fa-heart" onclick="event.stopPropagation(); toggleFavorite(this, {
        id: 'Nike2',
        title: 'Nike Sport Shoes',
        price: 1799,
        image: 'https://res.cloudinary.com/dxtmzketd/image/upload/v1750484045/shoess_1.3_lbnxf6.jpg'
      })"></i>

      <i class="fas fa-shopping-cart" onclick="event.stopPropagation(); addToCart(event, {
        id: 'Nike2',
        title: 'Nike Sport Shoes',
        price: 1799,
        image: 'https://res.cloudinary.com/dxtmzketd/image/upload/v1750484045/shoess_1.3_lbnxf6.jpg'
      })"></i>
    </div>

    <div class="discount-badge">-9%</div>
  </div>

  <div class="product-info">
    <h4>Nike</h4>
    <p>Nike Sport Shoes</p>
    <div class="stars">★★★★★</div>
    <div class="price">
  <span class="old">₹2,599</span>
  ₹1,799
  </div>
  </div>
</a>

  </div>
</section>

<script>
let qtyInput = document.getElementById("qty");
let selectedProduct = {
  id: "",
  title: "",
  image: "",
  price: 0,
  quantity: 1
};

function changeQty(amount) {
  let qty = parseInt(qtyInput.value);
  qty = Math.max(1, qty + amount);
  qtyInput.value = qty;
  selectedProduct.quantity = qty;
}

function changeImage(src) {
  document.getElementById("mainImage").src = src;
  selectedProduct.image = src;
}

// Load product from localStorage
window.onload = function () {
  const product = JSON.parse(localStorage.getItem("selectedProduct"));
  if (product) {
    document.getElementById("mainImage").src = product.img;
    document.getElementById("thumb1").src = product.img;
    document.getElementById("thumb2").src = product.imageBack || product.img;
    document.getElementById("productTitle").textContent = product.name || product.title;
    document.getElementById("productPrice").textContent = `₹${product.price}`;
    document.getElementById("productDesc").textContent = product.description || "";

    // Corrected selectedProduct format for cart
    selectedProduct = {
      id: product.id,
      title: product.name || product.title,
      image: product.img || product.image,
      price: product.price,
      quantity: 1
    };
  } else {
    document.getElementById("productTitle").textContent = "Product not found.";
  }
};

function addToCart(event, product) {
  event.preventDefault();
  let cart = JSON.parse(localStorage.getItem("cart")) || [];

  const exists = cart.find(item => item.id === product.id);
  if (!exists) {
    cart.push(product);
    localStorage.setItem("cart", JSON.stringify(cart));
    alert("Product added to cart!");
  } else {
    alert("Product already in cart!");
  }
}

document.querySelector(".btn-buy-now").addEventListener("click", function () {
  selectedProduct.quantity = parseInt(qtyInput.value);
  let cart = JSON.parse(localStorage.getItem("cart")) || [];

  const exists = cart.find(item => item.id === selectedProduct.id);
  if (!exists) {
    cart.push(selectedProduct);
    localStorage.setItem("cart", JSON.stringify(cart));
    alert("Product added to cart!");
  }

  window.location.href = "cart.html";
});

function viewProduct(product) {
  const formatted = {
    id: product.id || "",
    img: product.img || product.image || "",
    imageBack: product.imageBack || "",
    name: product.name || product.title || "No Title",
    price: product.price || 0,
    description: product.description || "No description available"
  };
  localStorage.setItem("selectedProduct", JSON.stringify(formatted));
  location.href = "product.html";
}
</script>
</body>
</html>